# web_admin Module

> ğŸ“ **Breadcrumb**: [Root](../CLAUDE.md) â†’ web_admin

## Overview

Web Admin æ¨¡å—æä¾›åŸºäº HTTP çš„è´¦å·ç®¡ç†ç•Œé¢ï¼Œè¿è¡Œåœ¨ç«¯å£ 8080ã€‚

## Module Structure

```
web_admin/
â”œâ”€â”€ server.py          # HTTP æœåŠ¡å™¨ä¸»ç¨‹åº
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html     # ä¸»é¡µé¢æ¨¡æ¿
â””â”€â”€ static/
    â”œâ”€â”€ css/           # æ ·å¼æ–‡ä»¶
    â””â”€â”€ js/            # JavaScript æ–‡ä»¶
```

## Entry Point

- **server.py**: `run_server(port=8080)` - å¯åŠ¨ HTTP æœåŠ¡

## Core Components

### AccountHandler (server.py)

ç»§æ‰¿è‡ª `http.server.SimpleHTTPRequestHandler`ï¼Œå¤„ç† HTTP è¯·æ±‚ã€‚

**Endpoints**:
| Method | Path | Description |
|--------|------|-------------|
| GET | `/` | è¿”å›ä¸»é¡µé¢ (index.html) |
| GET | `/static/*` | é™æ€èµ„æºæœåŠ¡ |
| GET | `/api/accounts` | è·å–æ‰€æœ‰è´¦å· (JSON) |
| POST | `/api/export` | å¯¼å‡ºé€‰ä¸­è´¦å· |

### Export API

**POST /api/export**

```json
// Request
{
  "emails": ["a@example.com", "b@example.com"],
  "fields": ["email", "password", "recovery_email"]
}

// Response: text/plain attachment
email----password----recovery_email
```

## Dependencies

- **database.py**: ä½¿ç”¨ `DBManager.get_all_accounts()` è·å–æ•°æ®
- **Port 8080**: é»˜è®¤ç«¯å£ï¼Œå¯èƒ½ä¸å…¶ä»–æœåŠ¡å†²çª

## Integration

Web Admin ç”± `create_window_gui.py` åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œï¼š

```python
# create_window_gui.py ä¸­çš„å¯åŠ¨é€»è¾‘
threading.Thread(target=run_server, daemon=True).start()
```

## Development Notes

1. æœåŠ¡å™¨ä½¿ç”¨ `socketserver.TCPServer.allow_reuse_address = True` å…è®¸å¿«é€Ÿé‡å¯
2. æ—¥å¿—è¢«é™é»˜ (`log_message` è¿”å›ç©º) ä»¥é¿å…å¹²æ‰°ä¸» GUI æ§åˆ¶å°
3. ä½¿ç”¨ `DBManager.init_db()` ç¡®ä¿æ•°æ®åº“å·²åˆå§‹åŒ–

---

*Generated by /init-project*
